webpackJsonp([17],{519:function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(React, $) {/**\n * Created by Administrator on 2017-2-13.\n */\n"use strict";\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }\n\nvar _reactComponentLib = __webpack_require__(329);\n\nvar _reactComponentLib2 = _interopRequireDefault(_reactComponentLib);\n\nvar _componentsLayout = __webpack_require__(34);\n\nvar _componentsLayout2 = _interopRequireDefault(_componentsLayout);\n\nvar _componentsPager = __webpack_require__(198);\n\nvar _componentsPager2 = _interopRequireDefault(_componentsPager);\n\nvar _componentsLabelInput = __webpack_require__(182);\n\nvar _componentsLabelInput2 = _interopRequireDefault(_componentsLabelInput);\n\nvar _utilPubsub = __webpack_require__(21);\n\nvar _utilPubsub2 = _interopRequireDefault(_utilPubsub);\n\n__webpack_require__(196);\n\nvar Depart = React.createClass({\n    displayName: "Depart",\n\n    getInitialState: function getInitialState() {\n        return {\n            title: "添加分类",\n            request: {\n                classifyName: "",\n                id: ""\n            },\n            type: "",\n            list: [],\n            pager: {\n                currentPage: 1,\n                pageSize: 20,\n                totalNum: 0\n            }\n        };\n    },\n    componentDidMount: function componentDidMount() {\n        this.getList();\n    },\n    getList: function getList() {\n        var pageNo = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];\n\n        var _this = this;\n        var pager = this.state.pager;\n\n        $.ajax({\n            url: commonBaseUrl + "/classify/findByPage.htm",\n            type: "get",\n            dataType: "json",\n            data: { d: "", pageNo: pageNo, pageSize: 20 },\n            success: function success(data) {\n                if (data.success) {\n                    pager.currentPage = pageNo;\n                    pager.totalNum = data.resultMap.iTotalDisplayRecords;\n                    _this.setState({\n                        list: data.resultMap.rows,\n                        pager: pager\n                    });\n                } else {\n                    pager.currentPage = 1;\n                    pager.totalNum = 0;\n                    _this.setState({ list: [], pager: pager });\n                }\n            }\n        });\n    },\n    doPage: function doPage() {},\n    add: function add() {\n        var _this2 = this;\n\n        var request = this.state.request;\n\n        delete request.id;\n        request.classifyName = "";\n        this.setState({\n            title: "添加分类",\n            type: "add",\n            request: request\n        }, function () {\n            _this2.refs.dialog.show();\n        });\n    },\n    dialogSubmit: function dialogSubmit() {\n        var _this = this;\n        var _state = this.state;\n        var request = _state.request;\n        var type = _state.type;\n\n        if (!request.classifyName) {\n            _utilPubsub2["default"].publish("showMsg", ["wrong", "请输入类别名称"]);\n            return false;\n        }\n        var url = type == "add" ? "/classify/add.htm" : "/classify/update.htm";\n        $.ajax({\n            url: commonBaseUrl + url,\n            dataType: "json",\n            type: "post",\n            data: { d: JSON.stringify(request) },\n            success: function success(data) {\n                if (data.success) {\n                    _utilPubsub2["default"].publish("showMsg", ["success", type == "add" ? "添加成功" : "修改成功"]);\n                    _this.getList();\n                } else {\n                    _utilPubsub2["default"].publish("showMsg", ["wrong", data.description]);\n                }\n            }\n        });\n    },\n    handleInput: function handleInput(type, e) {\n        var request = this.state.request;\n\n        request[type] = e.target.value;\n        this.setState({ request: request });\n    },\n    modify: function modify(item) {\n        var _this3 = this;\n\n        var request = this.state.request;\n\n        var jsonStr = JSON.stringify(item);\n        var json = JSON.parse(jsonStr);\n        request = json;\n        this.setState({\n            title: "修改分类",\n            type: "edit",\n            request: request\n        }, function () {\n            _this3.refs.dialog.show();\n        });\n    },\n    "delete": function _delete(classifyId) {\n        var _this = this;\n        _reactComponentLib2["default"].DialogManager.confirm({\n            message: \'您确定要删除吗？?\',\n            title: \'删除分类\',\n            submit: function submit() {\n                $.ajax({\n                    url: commonBaseUrl + "/classify/delete.htm",\n                    type: "post",\n                    dataType: "json",\n                    data: { d: JSON.stringify({ classifyId: classifyId }) },\n                    success: function success(data) {\n                        if (data.success) {\n                            _utilPubsub2["default"].publish("showMsg", ["success", "删除成功"]);\n                            _this.getList();\n                        } else {\n                            _utilPubsub2["default"].publish("showMsg", ["wrong", data.description]);\n                        }\n                    }\n                });\n            }\n        });\n    },\n\n    render: function render() {\n        var _this4 = this;\n\n        var _state2 = this.state;\n        var list = _state2.list;\n        var pager = _state2.pager;\n        var request = _state2.request;\n\n        return React.createElement(\n            _componentsLayout2["default"],\n            { currentKey: "4", defaultOpen: "1", bread: ["产品库存", "分类管理"] },\n            React.createElement(\n                "div",\n                { className: "depart-content" },\n                React.createElement(\n                    "div",\n                    { className: "tbn-div" },\n                    React.createElement(\n                        _reactComponentLib2["default"].Button,\n                        { className: "add-btn primary", onClick: this.add },\n                        "添加"\n                    )\n                ),\n                React.createElement(\n                    "table",\n                    { className: "table" },\n                    React.createElement(\n                        "thead",\n                        null,\n                        React.createElement(\n                            "tr",\n                            null,\n                            React.createElement(\n                                "td",\n                                null,\n                                "类别名称"\n                            ),\n                            React.createElement(\n                                "td",\n                                null,\n                                "操作方式"\n                            )\n                        )\n                    ),\n                    React.createElement(\n                        "tbody",\n                        null,\n                        list.length > 0 && list.map(function (item, index) {\n                            return React.createElement(\n                                "tr",\n                                { key: index },\n                                React.createElement(\n                                    "td",\n                                    null,\n                                    item.classifyName\n                                ),\n                                React.createElement(\n                                    "td",\n                                    null,\n                                    React.createElement(\n                                        "a",\n                                        { href: "javascript:;", className: "handle-a", onClick: _this4.modify.bind(_this4, item) },\n                                        "修改"\n                                    ),\n                                    React.createElement(\n                                        "a",\n                                        { href: "javascript:;", className: "handle-a", onClick: _this4["delete"].bind(_this4, item.id) },\n                                        "删除"\n                                    )\n                                )\n                            );\n                        })\n                    )\n                ),\n                list.length == 0 && React.createElement(\n                    "div",\n                    { className: "no-data" },\n                    "暂时没有数据哦"\n                ),\n                React.createElement(_componentsPager2["default"], _extends({ onPage: this.getList }, pager)),\n                React.createElement(\n                    _reactComponentLib2["default"].Dialog,\n                    { ref: "dialog", title: this.state.title, draggable: false, buttons: "submit,cancel", onCancel: this.dialogCancel, onSubmit: this.dialogSubmit },\n                    React.createElement(\n                        "div",\n                        { style: { width: \'400px\', wordWrap: \'break-word\' } },\n                        React.createElement(_componentsLabelInput2["default"], { placeholder: "请输入类别名称", require: true, value: request.classifyName, onChange: this.handleInput.bind(this, "classifyName"), label: "类别名称：" })\n                    )\n                )\n            )\n        );\n    }\n});\nmodule.exports = Depart;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(17)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcGFnZS9jb21tb2RpdHkvY2xhc3NpZnktbWFuYWdlbWVudC5qcz82YzhlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBQ0gsWUFBWSxDQUFDOztBQUViLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksVUFBVSxNQUFNLEVBQUUsRUFBRSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFLEVBQUUsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sTUFBTSxDQUFDLEVBQUUsQ0FBQzs7QUFFalEsU0FBUyxzQkFBc0IsQ0FBQyxHQUFHLEVBQUUsRUFBRSxPQUFPLEdBQUcsSUFBSSxHQUFHLENBQUMsVUFBVSxHQUFHLEdBQUcsR0FBRyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFOztBQUVqRyxJQUFJLGtCQUFrQixHQUFHLG1CQUFPLENBQUMsR0FBcUIsQ0FBQyxDQUFDOztBQUV4RCxJQUFJLG1CQUFtQixHQUFHLHNCQUFzQixDQUFDLGtCQUFrQixDQUFDLENBQUM7O0FBRXJFLElBQUksaUJBQWlCLEdBQUcsbUJBQU8sQ0FBQyxFQUF5QixDQUFDLENBQUM7O0FBRTNELElBQUksa0JBQWtCLEdBQUcsc0JBQXNCLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7QUFFbkUsSUFBSSxnQkFBZ0IsR0FBRyxtQkFBTyxDQUFDLEdBQXdCLENB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USxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUU7b0JBQ2hKLEtBQUssQ0FBQyxhQUFhO3dCQUNmLEtBQUs7d0JBQ0wsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsRUFBRTt3QkFDckQsS0FBSyxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLFlBQVksRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsQ0FBQztxQkFDeE07aUJBQ0o7YUFDSjtTQUNKLENBQUM7S0FDTDtDQUNKLENBQUMsQ0FBQztBQUNILE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDIiwiZmlsZSI6IjUxOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTctMi0xMy5cbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG52YXIgX3JlYWN0Q29tcG9uZW50TGliID0gcmVxdWlyZShcInJlYWN0LWNvbXBvbmVudC1saWJcIik7XG5cbnZhciBfcmVhY3RDb21wb25lbnRMaWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RDb21wb25lbnRMaWIpO1xuXG52YXIgX2NvbXBvbmVudHNMYXlvdXQgPSByZXF1aXJlKFwiLi4vLi4vY29tcG9uZW50cy9sYXlvdXRcIik7XG5cbnZhciBfY29tcG9uZW50c0xheW91dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21wb25lbnRzTGF5b3V0KTtcblxudmFyIF9jb21wb25lbnRzUGFnZXIgPSByZXF1aXJlKFwiLi4vLi4vY29tcG9uZW50cy9wYWdlclwiKTtcblxudmFyIF9jb21wb25lbnRzUGFnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tcG9uZW50c1BhZ2VyKTtcblxudmFyIF9jb21wb25lbnRzTGFiZWxJbnB1dCA9IHJlcXVpcmUoXCIuLi8uLi9jb21wb25lbnRzL2xhYmVsLWlucHV0XCIpO1xuXG52YXIgX2NvbXBvbmVudHNMYWJlbElucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbXBvbmVudHNMYWJlbElucHV0KTtcblxudmFyIF91dGlsUHVic3ViID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvcHVic3ViXCIpO1xuXG52YXIgX3V0aWxQdWJzdWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbFB1YnN1Yik7XG5cbnJlcXVpcmUoXCIuLi8uLi8uLi9jc3MvcGFnZS9kZXBhcnRtZW50LW1hbmFnZW1lbnQuc2Nzc1wiKTtcblxudmFyIERlcGFydCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogXCJEZXBhcnRcIixcblxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGl0bGU6IFwi5re75Yqg5YiG57G7XCIsXG4gICAgICAgICAgICByZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgY2xhc3NpZnlOYW1lOiBcIlwiLFxuICAgICAgICAgICAgICAgIGlkOiBcIlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHlwZTogXCJcIixcbiAgICAgICAgICAgIGxpc3Q6IFtdLFxuICAgICAgICAgICAgcGFnZXI6IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcbiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMjAsXG4gICAgICAgICAgICAgICAgdG90YWxOdW06IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgfSxcbiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkge1xuICAgICAgICB2YXIgcGFnZU5vID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcGFnZXIgPSB0aGlzLnN0YXRlLnBhZ2VyO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IGNvbW1vbkJhc2VVcmwgKyBcIi9jbGFzc2lmeS9maW5kQnlQYWdlLmh0bVwiLFxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgIGRhdGE6IHsgZDogXCJcIiwgcGFnZU5vOiBwYWdlTm8sIHBhZ2VTaXplOiAyMCB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBwYWdlci5jdXJyZW50UGFnZSA9IHBhZ2VObztcbiAgICAgICAgICAgICAgICAgICAgcGFnZXIudG90YWxOdW0gPSBkYXRhLnJlc3VsdE1hcC5pVG90YWxEaXNwbGF5UmVjb3JkcztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogZGF0YS5yZXN1bHRNYXAucm93cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VyOiBwYWdlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYWdlci5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VyLnRvdGFsTnVtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBsaXN0OiBbXSwgcGFnZXI6IHBhZ2VyIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBkb1BhZ2U6IGZ1bmN0aW9uIGRvUGFnZSgpIHt9LFxuICAgIGFkZDogZnVuY3Rpb24gYWRkKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RhdGUucmVxdWVzdDtcblxuICAgICAgICBkZWxldGUgcmVxdWVzdC5pZDtcbiAgICAgICAgcmVxdWVzdC5jbGFzc2lmeU5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIua3u+WKoOWIhuexu1wiLFxuICAgICAgICAgICAgdHlwZTogXCJhZGRcIixcbiAgICAgICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMyLnJlZnMuZGlhbG9nLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBkaWFsb2dTdWJtaXQ6IGZ1bmN0aW9uIGRpYWxvZ1N1Ym1pdCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gX3N0YXRlLnJlcXVlc3Q7XG4gICAgICAgIHZhciB0eXBlID0gX3N0YXRlLnR5cGU7XG5cbiAgICAgICAgaWYgKCFyZXF1ZXN0LmNsYXNzaWZ5TmFtZSkge1xuICAgICAgICAgICAgX3V0aWxQdWJzdWIyW1wiZGVmYXVsdFwiXS5wdWJsaXNoKFwic2hvd01zZ1wiLCBbXCJ3cm9uZ1wiLCBcIuivt+i+k+WFpeexu+WIq+WQjeensFwiXSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVybCA9IHR5cGUgPT0gXCJhZGRcIiA/IFwiL2NsYXNzaWZ5L2FkZC5odG1cIiA6IFwiL2NsYXNzaWZ5L3VwZGF0ZS5odG1cIjtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogY29tbW9uQmFzZVVybCArIHVybCxcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgZGF0YTogeyBkOiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBfdXRpbFB1YnN1YjJbXCJkZWZhdWx0XCJdLnB1Ymxpc2goXCJzaG93TXNnXCIsIFtcInN1Y2Nlc3NcIiwgdHlwZSA9PSBcImFkZFwiID8gXCLmt7vliqDmiJDlip9cIiA6IFwi5L+u5pS55oiQ5YqfXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF91dGlsUHVic3ViMltcImRlZmF1bHRcIl0ucHVibGlzaChcInNob3dNc2dcIiwgW1wid3JvbmdcIiwgZGF0YS5kZXNjcmlwdGlvbl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVJbnB1dDogZnVuY3Rpb24gaGFuZGxlSW5wdXQodHlwZSwgZSkge1xuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RhdGUucmVxdWVzdDtcblxuICAgICAgICByZXF1ZXN0W3R5cGVdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXF1ZXN0OiByZXF1ZXN0IH0pO1xuICAgIH0sXG4gICAgbW9kaWZ5OiBmdW5jdGlvbiBtb2RpZnkoaXRlbSkge1xuICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RhdGUucmVxdWVzdDtcblxuICAgICAgICB2YXIganNvblN0ciA9IEpTT04uc3RyaW5naWZ5KGl0ZW0pO1xuICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoanNvblN0cik7XG4gICAgICAgIHJlcXVlc3QgPSBqc29uO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIuS/ruaUueWIhuexu1wiLFxuICAgICAgICAgICAgdHlwZTogXCJlZGl0XCIsXG4gICAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzMy5yZWZzLmRpYWxvZy5zaG93KCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgXCJkZWxldGVcIjogZnVuY3Rpb24gX2RlbGV0ZShjbGFzc2lmeUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIF9yZWFjdENvbXBvbmVudExpYjJbXCJkZWZhdWx0XCJdLkRpYWxvZ01hbmFnZXIuY29uZmlybSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAn5oKo56Gu5a6a6KaB5Yig6Zmk5ZCX77yfPycsXG4gICAgICAgICAgICB0aXRsZTogJ+WIoOmZpOWIhuexuycsXG4gICAgICAgICAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbkJhc2VVcmwgKyBcIi9jbGFzc2lmeS9kZWxldGUuaHRtXCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZDogSlNPTi5zdHJpbmdpZnkoeyBjbGFzc2lmeUlkOiBjbGFzc2lmeUlkIH0pIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsUHVic3ViMltcImRlZmF1bHRcIl0ucHVibGlzaChcInNob3dNc2dcIiwgW1wic3VjY2Vzc1wiLCBcIuWIoOmZpOaIkOWKn1wiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdXRpbFB1YnN1YjJbXCJkZWZhdWx0XCJdLnB1Ymxpc2goXCJzaG93TXNnXCIsIFtcIndyb25nXCIsIGRhdGEuZGVzY3JpcHRpb25dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgIHZhciBfc3RhdGUyID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGxpc3QgPSBfc3RhdGUyLmxpc3Q7XG4gICAgICAgIHZhciBwYWdlciA9IF9zdGF0ZTIucGFnZXI7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gX3N0YXRlMi5yZXF1ZXN0O1xuXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX2NvbXBvbmVudHNMYXlvdXQyW1wiZGVmYXVsdFwiXSxcbiAgICAgICAgICAgIHsgY3VycmVudEtleTogXCI0XCIsIGRlZmF1bHRPcGVuOiBcIjFcIiwgYnJlYWQ6IFtcIuS6p+WTgeW6k+WtmFwiLCBcIuWIhuexu+euoeeQhlwiXSB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImRlcGFydC1jb250ZW50XCIgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogXCJ0Ym4tZGl2XCIgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdENvbXBvbmVudExpYjJbXCJkZWZhdWx0XCJdLkJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImFkZC1idG4gcHJpbWFyeVwiLCBvbkNsaWNrOiB0aGlzLmFkZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCLmt7vliqBcIlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBcInRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcInRhYmxlXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGhlYWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLnsbvliKvlkI3np7BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIuaTjeS9nOaWueW8j1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0Ym9keVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QubGVuZ3RoID4gMCAmJiBsaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0clwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGtleTogaW5kZXggfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzaWZ5TmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiBcImphdmFzY3JpcHQ6O1wiLCBjbGFzc05hbWU6IFwiaGFuZGxlLWFcIiwgb25DbGljazogX3RoaXM0Lm1vZGlmeS5iaW5kKF90aGlzNCwgaXRlbSkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIuS/ruaUuVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhyZWY6IFwiamF2YXNjcmlwdDo7XCIsIGNsYXNzTmFtZTogXCJoYW5kbGUtYVwiLCBvbkNsaWNrOiBfdGhpczRbXCJkZWxldGVcIl0uYmluZChfdGhpczQsIGl0ZW0uaWQpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLliKDpmaRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGxpc3QubGVuZ3RoID09IDAgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwibm8tZGF0YVwiIH0sXG4gICAgICAgICAgICAgICAgICAgIFwi5pqC5pe25rKh5pyJ5pWw5o2u5ZOmXCJcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX2NvbXBvbmVudHNQYWdlcjJbXCJkZWZhdWx0XCJdLCBfZXh0ZW5kcyh7IG9uUGFnZTogdGhpcy5nZXRMaXN0IH0sIHBhZ2VyKSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Q29tcG9uZW50TGliMltcImRlZmF1bHRcIl0uRGlhbG9nLFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogXCJkaWFsb2dcIiwgdGl0bGU6IHRoaXMuc3RhdGUudGl0bGUsIGRyYWdnYWJsZTogZmFsc2UsIGJ1dHRvbnM6IFwic3VibWl0LGNhbmNlbFwiLCBvbkNhbmNlbDogdGhpcy5kaWFsb2dDYW5jZWwsIG9uU3VibWl0OiB0aGlzLmRpYWxvZ1N1Ym1pdCB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHsgd2lkdGg6ICc0MDBweCcsIHdvcmRXcmFwOiAnYnJlYWstd29yZCcgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChfY29tcG9uZW50c0xhYmVsSW5wdXQyW1wiZGVmYXVsdFwiXSwgeyBwbGFjZWhvbGRlcjogXCLor7fovpPlhaXnsbvliKvlkI3np7BcIiwgcmVxdWlyZTogdHJ1ZSwgdmFsdWU6IHJlcXVlc3QuY2xhc3NpZnlOYW1lLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVJbnB1dC5iaW5kKHRoaXMsIFwiY2xhc3NpZnlOYW1lXCIpLCBsYWJlbDogXCLnsbvliKvlkI3np7DvvJpcIiB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBEZXBhcnQ7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9iYWJlbC1sb2FkZXIhLi9zcmMvanMvcGFnZS9jb21tb2RpdHkvY2xhc3NpZnktbWFuYWdlbWVudC5qcyJdLCJzb3VyY2VSb290IjoiIn0=');
}});
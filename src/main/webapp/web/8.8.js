webpackJsonp([8,16],{231:function(e,t,a){(function(t){"use strict";var a=t.createClass({displayName:"Input",selectFn:function(e){console.log(e)},render:function(){var e=this;return t.createElement("div",{className:"m-t-10"},t.createElement("label",{className:"left-label "},this.props.require&&t.createElement("i",{className:"require"},"*"),this.props.label||""),t.createElement(RUI.Select,{data:this.props.data||[],value:this.props.default||{},stuff:!0,callback:function(t){e.props.callback&&e.props.callback(t)},className:"rui-theme-1 w-168"}))}});e.exports=a}).call(t,a(2))},443:function(e,t,a){(function(t,l){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n=a(71),c=s(n),i=a(231),u=(s(i),a(226)),o=s(u),m=a(7);a(228);var d=a(202),h=(s(d),a(210)),p=s(h),v=["未处理","已分配","已完成"],f=t.createClass({displayName:"Depart",getInitialState:function(){return{listRequest:{orderNo:"",orderName:"",isUrgent:"",tailorStatus:"",vampStatus:"",soleStatus:"",qcStatus:""},pager:{currentPage:1,pageSize:10,totalNum:0},handleSelect:[{key:"裁剪完成",value:"1"},{key:"机车分配",value:"2"},{key:"机车完成",value:"3"},{key:"查看",value:"4"},{key:"修改",value:"5"},{key:"删除",value:"6"}],list:[],isUrgent:{key:"全部",value:""},tailorStatus:{key:"全部",value:""},vampStatus:{key:"全部",value:""},qcStatus:{key:"全部",value:""},soleStatus:{key:"全部",value:""},smsIsOpen:1,confirmMsg:"",confirmUrl:"",currListItem:{}}},componentDidMount:function(){this.getList()},getList:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this,a=this.state,s=a.pager,r=a.listRequest;l.ajax({url:commonBaseUrl+"/order/findOrderList.htm",type:"get",dataType:"json",data:{d:JSON.stringify(r),pageNo:e,pageSize:10},success:function(a){a.success?(s.currentPage=e,s.totalNum=a.resultMap.iTotalDisplayRecords,t.setState({list:a.resultMap.rows||[],pager:s})):(s.currentPage=1,s.totalNum=0,t.setState({list:[],pager:s}))}})},create:function(){m.hashHistory.push("/production/createOrder")},getVampType:function(e){return v[1*e]},handleListSelect:function(e,t){var a=t.value;switch(1*a){case 2:this.modify(e);break;case 4:case 6:m.hashHistory.push("/order/distribution?id="+e.orderNo);break;case 1:m.hashHistory.push("/order/detail?id="+e.orderNo);break;case 3:case 5:case 7:case 8:this.commonHandle(a,e);break;case 9:this.delete(e)}},modify:function(e){var t=localStorage.type;1==t?m.hashHistory.push("/production/createOrder?id="+e.orderNo):m.hashHistory.push("/order/distribution?id="+e.orderNo+"&type='edit'")},commonHandle:function(e,t){var a=this,s=void 0,r="";switch(1*e){case 3:s="/order/tailorFinish.htm",r="确认是否裁剪完成？";break;case 5:return s="/order/vampFinish.htm",r="确认是否机车完成？",void this.handleConfirm(s,r,t);case 7:s="/order/soleFinish.htm",r="确认是否底工完成？";break;case 8:return s="/order/qcFinish.htm",r="确认是否质检完成？",void this.handleConfirm(s,r,t)}RUI.DialogManager.confirm({message:r,title:"提示",submit:function(){l.ajax({url:commonBaseUrl+s,type:"post",dataType:"json",data:{d:JSON.stringify({orderNo:t.orderNo})},success:function(e){e.success?(p.default.publish("showMsg",["success","操作成功"]),a.getList()):p.default.publish("showMsg",["wrong",e.description])}})}})},handleConfirm:function(e,t,a){var l=this;this.setState({smsIsOpen:1,confirmMsg:t,currListItem:a,confirmUrl:e},function(){l.refs.dialog.show()})},delete:function(e){var t=e.orderNo,a=this;RUI.DialogManager.confirm({message:"您确定要删除吗？?",title:"删除订单",submit:function(){l.ajax({url:commonBaseUrl+"/order/delete.htm",type:"post",dataType:"json",data:{d:JSON.stringify({orderNo:t})},success:function(e){e.success?(p.default.publish("showMsg",["success","删除成功"]),a.getList()):p.default.publish("showMsg",["wrong",e.description])}})}})},handleSelect:function(e,t){var a=this,l=this.state.listRequest;l[e]=t.value,this.state[e]=t,this.setState({},function(){a.getList()})},handleInput:function(e,t){var a=this.state.listRequest;a[e]=t.target.value},search:function(){this.getList()},getSelectList:function(e){var t=[{key:"查看",value:"1"}],a=localStorage.type;return 1==a?t.push({key:"修改",value:"2"},{key:"删除",value:"9"}):2==a?(1==e.vampStatus&&t.push({key:"修改",value:"2"}),0==e.tailorStatus&&t.push({key:"裁剪完成",value:"3"}),0==e.vampStatus&&t.push({key:"机车分配",value:"4"}),1==e.tailorStatus&&1==e.vampStatus&&t.push({key:"机车完成",value:"5"})):3==a&&(1==e.soleStatus&&t.push({key:"修改",value:"2"}),0==e.soleStatus&&t.push({key:"底工分配",value:"6"}),1==e.soleStatus&&t.push({key:"底工完成",value:"7"}),0==e.qcStatus&&2==e.soleStatus&&t.push({key:"质检完成",value:"8"})),t},dialogSubmit:function(){var e=this,t=this.state,a=t.confirmUrl,s=t.smsIsOpen,r=t.currListItem;l.ajax({url:commonBaseUrl+a,type:"post",dataType:"json",data:{d:JSON.stringify({orderNo:r.orderNo,smsIsOpen:s})},success:function(t){t.success?(p.default.publish("showMsg",["success","操作成功"]),e.getList()):p.default.publish("showMsg",["wrong",t.description])}})},checkSms:function(e){this.setState({smsIsOpen:e.data.selected})},render:function(){var e=this,l=this,s=this.state,n=s.pager,i=s.list,u=(s.handleSelect,s.isUrgent),m=s.tailorStatus,d=s.vampStatus,h=s.soleStatus,p=s.qcStatus,v=s.smsIsOpen,f=s.confirmMsg,y=localStorage.type,g=0;switch(1*y){case 1:g=2;break;case 2:g=0;break;case 3:g=1}return t.createElement(c.default,{currentKey:"8",defaultOpen:g+"",bread:["生产管理","生产订单"]},t.createElement("div",{className:"depart-content"},t.createElement("div",{className:"tbn-div h-100"},t.createElement("div",null,t.createElement("label",{htmlFor:""},"订单编号："),t.createElement(RUI.Input,{onChange:this.handleInput.bind(this,"orderNo"),className:"w-150"}),t.createElement("label",{htmlFor:""},"订单名称："),t.createElement(RUI.Input,{onChange:this.handleInput.bind(this,"orderName"),className:"w-150"}),t.createElement("label",{htmlFor:""},"加急："),t.createElement(RUI.Select,{data:[{key:"全部",value:""},{key:"是",value:"1"},{key:"否",value:"2"}],value:u,stuff:!0,callback:this.handleSelect.bind(this,"isUrgent"),className:"rui-theme-1 w-120"}),t.createElement(RUI.Button,{className:"primary",onClick:this.search},"搜索"),1==y&&t.createElement(RUI.Button,{className:"add-btn primary",onClick:this.create},"创建")),t.createElement("div",{className:"m-t-10"},t.createElement("label",{htmlFor:""},"裁剪状态："),t.createElement(RUI.Select,{data:[{key:"全部",value:""},{key:"未处理",value:"0"},{key:"已完成",value:"1"}],value:m,stuff:!0,callback:this.handleSelect.bind(this,"tailorStatus"),className:"rui-theme-1 w-120"}),t.createElement("label",{htmlFor:""},"机车状态："),t.createElement(RUI.Select,{data:[{key:"全部",value:""},{key:"未处理",value:"0"},{key:"处理中",value:"1"},{key:"已完成",value:"2"}],value:d,stuff:!0,callback:this.handleSelect.bind(this,"vampStatus"),className:"rui-theme-1 w-120"}),t.createElement("label",{htmlFor:""},"底工状态："),t.createElement(RUI.Select,{data:[{key:"全部",value:""},{key:"未处理",value:"0"},{key:"处理中",value:"1"},{key:"已完成",value:"2"}],value:h,stuff:!0,callback:this.handleSelect.bind(this,"soleStatus"),className:"rui-theme-1 w-120"}),t.createElement("label",{htmlFor:""},"质检状态："),t.createElement(RUI.Select,{data:[{key:"全部",value:""},{key:"未处理",value:"0"},{key:"已完成",value:"1"}],value:p,stuff:!0,callback:this.handleSelect.bind(this,"qcStatus"),className:"rui-theme-1 w-120"}))),t.createElement("table",{className:"table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"生产样图"),t.createElement("td",null,"订单编号"),t.createElement("td",null,"订单名称"),t.createElement("td",null,"交货时间"),t.createElement("td",null,"双数"),1==y&&t.createElement("td",null,"产品金额"),t.createElement("td",null,"加急"),t.createElement("td",null,"裁剪状态"),t.createElement("td",null,"机车状态"),t.createElement("td",null,"底工状态"),t.createElement("td",null,"质检状态"),t.createElement("td",null,"剩余时间"),t.createElement("td",null,"操作方式"))),t.createElement("tbody",null,i.map(function(s,r){var n=l.getSelectList(s);return t.createElement("tr",{key:r},t.createElement("td",null,t.createElement("img",{className:"commodity-img",src:s.orderPic?s.orderPic:a(444),alt:""})),t.createElement("td",null,s.orderNo),t.createElement("td",null,s.orderName),t.createElement("td",null,s.deliveryTime),t.createElement("td",null,s.orderNum),1==y&&t.createElement("td",null,(s.orderAmount/100).toFixed(2)),t.createElement("td",null,1==s.isUrgent?"是":"否"),t.createElement("td",null,0==s.tailorStatus?"未处理":"裁料完成"),t.createElement("td",null,e.getVampType(s.vampStatus)),t.createElement("td",null,e.getVampType(s.soleStatus)),t.createElement("td",null,0==s.qcStatus?"未处理":"已处理"),t.createElement("td",null,s.residueTime+"天"),t.createElement("td",null,t.createElement(RUI.Select,{data:n,value:{key:"查看",value:"1"},className:"rui-theme-1 w-120",callback:e.handleListSelect.bind(e,s),stuff:!0})))}))),0==i.length&&t.createElement("div",{className:"no-data"},"暂时没有数据哦"),t.createElement(o.default,r({onPage:this.getList},n)),t.createElement(RUI.Dialog,{ref:"dialog",title:"提示",draggable:!1,buttons:"submit,cancel",onSubmit:this.dialogSubmit},t.createElement("div",{style:{width:"300px",wordWrap:"break-word"}},t.createElement("div",null,f),t.createElement("div",null,t.createElement(RUI.Checkbox,{selected:1==v?1:0,onChange:this.checkSms},"是否发送短信"))))))}});e.exports=f}).call(t,a(2),a(72))},444:function(e,t,a){e.exports=a.p+"images/picList.ed3a6ee6.jpg"}});
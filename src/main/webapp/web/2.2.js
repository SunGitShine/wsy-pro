webpackJsonp([2,16],{231:function(e,t,a){(function(t){"use strict";var a=t.createClass({displayName:"Input",selectFn:function(e){console.log(e)},render:function(){var e=this;return t.createElement("div",{className:"m-t-10"},t.createElement("label",{className:"left-label "},this.props.require&&t.createElement("i",{className:"require"},"*"),this.props.label||""),t.createElement(RUI.Select,{data:this.props.data||[],value:this.props.default||{},stuff:!0,callback:function(t){e.props.callback&&e.props.callback(t)},className:"rui-theme-1 w-168"}))}});e.exports=a}).call(t,a(2))},417:function(e,t,a){(function(t,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},r=a(71),i=l(r),u=a(227),c=l(u),o=a(231),d=l(o),m=a(226),h=l(m),p=a(210),f=l(p);a(228);var g=["","超级管理员","上案管理员","下案管理员","质检管理员","库存管理员"],b=t.createClass({displayName:"Depart",getInitialState:function(){return{title:"添加帐号",request:{username:"",mobile:"",realname:"",type:2},listRequest:{username:"",type:""},modifyRequest:{username:"",password:""},pager:{currentPage:1,pageSize:20,totalNum:0},list:[]}},componentDidMount:function(){this.getList()},getList:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this,a=this.state,l=a.pager,n=a.listRequest;s.ajax({url:commonBaseUrl+"/account/findByPage.htm",type:"get",dataType:"json",data:{d:JSON.stringify(n),pageNo:e,pageSize:20},success:function(a){a.success?(l.currentPage=e,l.totalNum=a.resultMap.iTotalDisplayRecords,t.setState({list:a.resultMap.rows,pager:l})):(l.currentPage=1,l.totalNum=0,t.setState({list:[],pager:l}))}})},add:function(){var e=this,t={username:"",mobile:"",realname:"",type:2};this.setState({request:t},function(){console.log(e.state.request),e.refs.dialog.show()})},dialogSubmit:function(){var e=this;return!!this.checkValid()&&(s.ajax({url:commonBaseUrl+"/account/add.htm",type:"post",dataType:"json",data:{d:JSON.stringify(this.state.request)},success:function(t){t.success?(f.default.publish("showMsg",["success","添加成功"]),e.getList()):f.default.publish("showMsg",["success",t.description])}}),void console.log(this.state.request))},checkValid:function(){var e=this.state.request,t=!0,a="";return e.username?e.realname?e.mobile?(a="",t=!0):(a="请输入手机号",t=!1):(a="请输入姓名",t=!1):(a="请输入帐号",t=!1),a&&f.default.publish("showMsg",["wrong",a]),t},handleInput:function(e,t){var a=this.state,s=a.request,l=a.modifyRequest;"password"==e?l[e]=t.target.value:s[e]=t.target.value,this.setState({request:s,modifyRequest:l})},modify:function(e){var t=this,a=this.state.modifyRequest;a.username=e.username,this.setState({modifyRequest:a},function(){t.refs.pwddialog.show()})},delete:function(e){var t=this;RUI.DialogManager.confirm({message:"您确定要删除吗？?",title:"删除帐号",submit:function(){s.ajax({url:commonBaseUrl+"/account/delete.htm",type:"post",dataType:"json",data:{d:JSON.stringify({username:e})},success:function(e){e.success?(f.default.publish("showMsg",["success","删除成功"]),t.getList()):f.default.publish("showMsg",["wrong",e.description])}})}})},pwddialogSubmit:function(){var e=this,t=this.state.modifyRequest;return t.password?void s.ajax({url:commonBaseUrl+"/account/updatePassword.htm",dataType:"json",type:"post",data:{d:JSON.stringify(e.state.modifyRequest)},success:function(e){e.success?f.default.publish("showMsg",["success","修改成功"]):f.default.publish("showMsg",["wrong",e.description])}}):(f.default.publish("showMsg",["wrong","请输入密码"]),!1)},getType:function(e){return g[e]},dialogSelect:function(e){var t=this.state.request;t.type=e.value,this.setState({request:t})},select:function(e){var t=this,a=this.state.listRequest;a.type=e.value,this.setState({listRequest:a},function(){t.getList()})},accountInput:function(e){var t=this.state.listRequest;t.username=e.target.value,this.setState({listRequest:t})},search:function(){this.getList()},render:function(){var e=this,a=this.state,s=a.pager,l=a.list,r=a.modifyRequest,u=a.request;return t.createElement(i.default,{currentKey:"3",defaultOpen:"0",bread:["部门成员","帐号管理"]},t.createElement("div",{className:"depart-content"},t.createElement("div",{className:"tbn-div"},t.createElement("label",{htmlFor:""},"部门："),t.createElement(RUI.Select,{data:[{key:"全部",value:""},{key:"超级管理员",value:"1"},{key:"上案管理员",value:"2"},{key:"下案管理员",value:"3"},{key:"质检管理员",value:"4"},{key:"库存管理员",value:"5"}],value:{key:"全部",value:""},stuff:!0,callback:this.select,className:"rui-theme-1 w-120"}),t.createElement("label",{htmlFor:""},"帐号："),t.createElement(RUI.Input,{onChange:this.accountInput,className:"w-150"}),t.createElement(RUI.Button,{className:"primary",onClick:this.search},"搜索"),t.createElement(RUI.Button,{className:"add-btn primary",onClick:this.add},"添加")),t.createElement("table",{className:"table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"帐号"),t.createElement("td",null,"名字"),t.createElement("td",null,"类型"),t.createElement("td",null,"操作方式"))),t.createElement("tbody",null,l.length>0&&l.map(function(a,s){return t.createElement("tr",{key:s},t.createElement("td",null,a.username),t.createElement("td",null,a.realname),t.createElement("td",null,e.getType(a.type)),t.createElement("td",null,t.createElement("a",{href:"javascript:;",className:"handle-a",onClick:e.modify.bind(e,a)},"修改"),t.createElement("a",{href:"javascript:;",className:"handle-a",onClick:e.delete.bind(e,a.username)},"删除")))}))),0==l.length&&t.createElement("div",{className:"no-data"},"暂时没有数据哦"),t.createElement(h.default,n({onPage:this.getList},s)),t.createElement(RUI.Dialog,{ref:"dialog",title:"添加帐号",draggable:!1,buttons:"submit,cancel",onSubmit:this.dialogSubmit},t.createElement("div",{style:{width:"400px",wordWrap:"break-word"}},t.createElement(c.default,{placeholder:"请输入帐号",require:!0,value:u.username,onChange:this.handleInput.bind(this,"username"),label:"帐号："}),t.createElement(c.default,{placeholder:"请输入姓名",require:!0,value:u.realname,onChange:this.handleInput.bind(this,"realname"),label:"姓名："}),t.createElement(c.default,{placeholder:"请输入手机号",require:!0,value:u.mobile,onChange:this.handleInput.bind(this,"mobile"),label:"手机号："}),t.createElement(d.default,{require:!0,label:"类型：",data:[{key:"上案管理员",value:2},{key:"下案管理员",value:3},{key:"质检管理员",value:4},{key:"库存管理员",value:5}],callback:this.dialogSelect,default:{key:"上案管理员",value:"2"}}))),t.createElement(RUI.Dialog,{ref:"pwddialog",title:"修改密码",draggable:!1,buttons:"submit,cancel",onSubmit:this.pwddialogSubmit},t.createElement("div",{style:{width:"400px",wordWrap:"break-word"}},t.createElement(c.default,{value:r.username,disabled:!0,require:!0,label:"帐号："}),t.createElement(c.default,{type:"password",placeholder:"请输入密码",require:!0,onChange:this.handleInput.bind(this,"password"),label:"密码："})))))}});e.exports=b}).call(t,a(2),a(72))}});
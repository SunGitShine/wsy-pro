webpackJsonp([6,16],{232:function(e,t,a){(function(e){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function s(){return e.ajax({url:commonBaseUrl+"/department/findByPage.htm",type:"get",dataType:"json",data:{d:"",pageNo:1,pageSize:2e4}}).then(function(e){return e.success?e.resultMap:(m.default.publish("showMsg",["wrong",e.description]),e)})}function n(){return e.ajax({url:commonBaseUrl+"/employee/findByPage.htm",type:"get",dataType:"json",data:{d:"",pageNo:1,pageSize:2e4}}).then(function(e){return e.success?e.resultMap:(m.default.publish("showMsg",["wrong",e.description]),e)})}function r(){return e.ajax({url:commonBaseUrl+"/classify/findByPage.htm",type:"get",dataType:"json",data:{d:"",pageNo:1,pageSize:2e4}}).then(function(e){return e.success?e.resultMap:(m.default.publish("showMsg",["wrong",e.description]),e)})}function u(){return e.ajax({url:commonBaseUrl+"/product/findByPage.htm",type:"get",dataType:"json",data:{d:JSON.stringify({classifyId:"",name:""}),pageNo:1,pageSize:2e4}}).then(function(e){return e.success?e.resultMap:(m.default.publish("showMsg",["wrong",e.description]),e)})}function c(t){var a=t||"";return e.ajax({url:commonBaseUrl+"/employee/findByPage.htm",type:"get",dataType:"json",data:{d:JSON.stringify({departmentId:a}),pageNo:1,pageSize:2e4}}).then(function(e){return e.success?e.resultMap:(m.default.publish("showMsg",["wrong",e.description]),e)})}function i(t,a){var l=localStorage.type,s=1;return 2==l?s=1:3==l&&(s=2),s=a||s,e.ajax({url:commonBaseUrl+"/order/findByOrderNo.htm",type:"get",dataType:"json",data:{d:JSON.stringify({orderNo:t,type:s})}}).then(function(e){return e.success?e.resultMap:(m.default.publish("showMsg",["wrong",e.description]),e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.departList=s,t.employeeList=n,t.classifyList=r,t.productList=u,t.memberList=c,t.orderDetail=i;var o=a(210),m=l(o)}).call(t,a(72))},441:function(e,t,a){(function(t,l){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},r=a(71),u=s(r),c=a(227),i=(s(c),a(226)),o=s(i),m=a(210),d=s(m),p=a(7);a(228);var h=a(232),f=["","男","女","通用"],g=["","成人","儿童","通用"],y=t.createClass({displayName:"Depart",getInitialState:function(){return{title:"",numTitle:"",currList:{},listRequest:{id:"",classifyId:"",status:""},outputRequest:{productId:"",productName:"",storeBeforeNum:"",type:1,remak:"",productStoreVOs:[]},pager:{currentPage:1,pageSize:10,totalNum:0},list:[],stockDetail:[],classifySelect:[{key:"全部",value:""}],productSelect:[{key:"全部",value:""}]}},componentDidMount:function(){this.getList(),this.classifyList(),this.productList()},getList:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this,a=this.state,s=a.pager,n=a.listRequest;l.ajax({url:commonBaseUrl+"/store/findStoreList.htm",type:"get",dataType:"json",data:{d:JSON.stringify(n),pageNo:e,pageSize:10},success:function(a){a.success?(s.currentPage=e,s.totalNum=a.resultMap.iTotalDisplayRecords,t.setState({list:a.resultMap.rows,pager:s})):(s.currentPage=1,s.totalNum=0,t.setState({list:[],pager:s}))}})},classifyList:function(){var e=this,t=this.state.classifySelect;(0,h.classifyList)().then(function(a){a.rows&&a.rows.map(function(e){t.push({key:e.classifyName,value:e.id})}),e.setState({classifySelect:t})})},productList:function(){var e=this,t=this.state.productSelect;(0,h.productList)().then(function(a){a.rows&&a.rows.map(function(e){t.push({key:e.name,value:e.id})}),e.setState({productSelect:t})})},handleSelect:function(e,t){var a=this,l=this.state.outputRequest,s=t.value;switch(1*s){case 1:this.getStockDetail(e),this.refs.dialogDetail.show();break;case 2:l.type=1,this.getStockDetail(e),this.setState({title:"产品出库",numTitle:"出库数量"},function(){a.refs.dialogOutPut.show()});break;case 3:l.type=2,this.getStockDetail(e),this.setState({title:"产品入库",numTitle:"入库数量"},function(){a.refs.dialogOutPut.show()});break;case 4:p.hashHistory.push("/output?type=1&id="+e.id);break;case 5:this.getStockDetail(e),this.refs.dialogSet.show()}this.setState({currList:e})},getStockDetail:function(e){var t=this,a=this.state,s=(a.stockDetail,a.outputRequest);s.productId=e.id,s.storeBeforeNum=e.storeTotalNum,l.ajax({url:commonBaseUrl+"/store/findStoreDetail.htm",type:"get",dataType:"json",data:{d:JSON.stringify({productId:e.id})},success:function(e){if(e.success){var a=e.resultMap.productStoreDOs;a.map(function(e){e.operateNum=0}),t.setState({stockDetail:a})}else d.default.publish("showMsg",["wrong",e.description]),t.setState({stockDetail:[]})}})},outPut:function(){var e=this.state,t=e.outputRequest,a=e.stockDetail,s=e.currList,n=this;l.extend(!0,[],a);t.productStoreVOs=a,t.productName=s.name,l.ajax({url:commonBaseUrl+"/store/inputOrOutput.htm",type:"post",dataType:"json",data:{d:JSON.stringify(t)},success:function(e){e.success?(d.default.publish("showMsg",["success","操作成功"]),n.getList()):d.default.publish("showMsg",["wrong",e.description])}})},applySex:function(e){return f[e]},applyCrowd:function(e){return g[e]},listSelect:function(e,t){var a=this,l=this.state.listRequest;l[e]=t.value,this.setState({listRequest:l},function(){a.getList()})},search:function(){this.getList()},handleInput:function(e,t){var a=this.state.outputRequest;a[e]=t.target.value,this.setState({})},stockSet:function(){var e=this.state,t=e.stockDetail,a=e.currList,s=[];t.map(function(e){s.push({id:e.id,storeMin:e.storeMin,storeMax:e.storeMax})}),l.ajax({url:commonBaseUrl+"/store/updateStoreSet.htm",type:"post",dataType:"json",data:{d:JSON.stringify({productStoreDOs:s,productId:a.id})},success:function(e){e.success?d.default.publish("showMsg",["success","设置成功"]):d.default.publish("showMsg",["wrong",e.description])}})},stockChange:function(e,t,a){var l=this.state.stockDetail;l[t][e]=a.target.value,this.setState({stockDetail:l})},outputChange:function(e,t,a){var l=this.state,s=l.stockDetail,n=l.outputRequest,r=n.type,u=1*t.shoeNum,c=1*t.storeMax,i=1*t.storeMin,o=1*a.target.value;1==r?o>u?s[e].tips="出库双数不大于库存数量":u-1*o<i?s[e].tips="出库后小于库存最小值":s[e].tips="":o+u>c&&c!=-1?s[e].tips="入库后大于库存最大值":o+u<i&&i!=-1?s[e].tips="入库后小于库存最小值":s[e].tips="",s[e].operateNum=a.target.value||0,this.setState({stockDetail:s})},render:function(){var e=this,a=this.state,l=a.list,s=a.productSelect,r=a.classifySelect,c=a.stockDetail,i=a.pager,m=a.currList,d=localStorage.type,p=0;switch(1*d){case 1:p=1;break;case 3:p=0}var h=[{key:"库存详情",value:"1"},{key:"出库",value:"2"},{key:"入库",value:"3"},{key:"出入库明细",value:"4"}];return 3!=d&&h.push({key:"库存设置",value:5}),t.createElement(u.default,{currentKey:"6",defaultOpen:p+"",bread:["产品库存","库存管理"]},t.createElement("div",{className:"depart-content"},t.createElement("div",{className:"tbn-div"},t.createElement("label",{htmlFor:""},"分类："),t.createElement(RUI.Select,{data:r,value:{key:"全部",value:"1"},stuff:!0,callback:this.listSelect.bind(this,"classifyId"),className:"rui-theme-1 w-120"}),t.createElement("label",{htmlFor:""},"产品名称："),t.createElement(RUI.Select,{data:s,value:{key:"全部",value:"1"},stuff:!0,callback:this.listSelect.bind(this,"id"),className:"rui-theme-1 w-120"}),t.createElement("label",{htmlFor:""},"状态："),t.createElement(RUI.Select,{data:[{key:"正常",value:"1"},{key:"异常",value:"2"}],value:{key:"全部",value:"1"},stuff:!0,callback:this.listSelect.bind(this,"status"),className:"rui-theme-1 w-120"}),t.createElement(RUI.Button,{className:"primary",onClick:this.search},"搜索")),t.createElement("table",{className:"table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"产品图片"),t.createElement("td",null,"产品名称"),t.createElement("td",null,"所属分类"),t.createElement("td",null,"适用性别"),t.createElement("td",null,"适用人群"),t.createElement("td",null,"库存总量"),t.createElement("td",null,"状态"),t.createElement("td",null,"操作方式"))),t.createElement("tbody",null,l.length>0&&l.map(function(a,l){return t.createElement("tr",{key:l},t.createElement("td",null,t.createElement("img",{className:"commodity-img",src:a.url,alt:""})),t.createElement("td",null,a.name),t.createElement("td",null,a.classifyName),t.createElement("td",null,e.applySex(a.applySex)),t.createElement("td",null,e.applyCrowd(a.applyCrowd)),t.createElement("td",null,a.storeTotalNum),t.createElement("td",null,1==a.status?"正常":"异常"),t.createElement("td",null,t.createElement(RUI.Select,{data:h,value:{key:"库存详情",value:"1"},stuff:!0,callback:e.handleSelect.bind(e,a),className:"rui-theme-1 w-120"})))}))),0==l.length&&t.createElement("div",{className:"no-data"},"暂时没有数据哦"),t.createElement(o.default,n({onPage:this.getList},i)),t.createElement(RUI.Dialog,{ref:"dialogDetail",title:"库存详情",draggable:!1,buttons:"submit"},t.createElement("div",{style:{width:"500px",wordWrap:"break-word",maxHeight:"350px",overflow:"auto"}},t.createElement("div",{className:""},t.createElement("label",{htmlFor:"",className:"c"},"产品信息："),t.createElement("span",null,m.name,"   ",m.storeTotalNum,"双"),t.createElement("table",{className:"table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"鞋码"),t.createElement("td",null,"库存"),t.createElement("td",null,"库存区间"))),t.createElement("tbody",null,c.length>0&&c.map(function(e,a){var l="";return(e.shoeNum>e.storeMax&&e.storeMax!=-1||e.shoeNum<e.storeMin)&&(l="bg-red"),t.createElement("tr",{key:a,className:l},t.createElement("td",null,e.shoeCode),t.createElement("td",null,e.shoeNum),t.createElement("td",null,(e.storeMin==-1?"无限制":e.storeMin)+"-"+(e.storeMax==-1?"无限制":e.storeMax)))})))))),t.createElement(RUI.Dialog,{ref:"dialogOutPut",title:this.state.title,draggable:!1,buttons:"submit,cancel",onSubmit:this.outPut},t.createElement("div",{style:{width:"500px",wordWrap:"break-word",maxHeight:"350px",overflow:"auto"}},t.createElement("div",{className:""},t.createElement("label",{htmlFor:"",className:"c"},"产品信息："),t.createElement("span",null,m.name,"   ",m.storeTotalNum,"双"),t.createElement("table",{className:"table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"鞋码"),t.createElement("td",null,"库存"),t.createElement("td",null,"库存区间"),t.createElement("td",null,this.state.numTitle))),t.createElement("tbody",null,c.length>0&&c.map(function(a,l){return t.createElement("tr",{key:l},t.createElement("td",null,a.shoeCode),t.createElement("td",null,a.shoeNum),t.createElement("td",null,(a.storeMin==-1?"无限制":a.storeMin)+"-"+(a.storeMax==-1?"无限制":a.storeMax)),t.createElement("td",null,t.createElement(RUI.Input,{value:a.operateNum||"",onChange:e.outputChange.bind(e,l,a),className:"w-80"}),t.createElement("p",{className:"require"},a.tips)))}))),t.createElement("div",{className:"m-t-10"},t.createElement("label",{htmlFor:"",className:"left-label left"},"备注："),t.createElement(RUI.Textarea,{onChange:this.handleInput.bind(this,"remak"),className:"w-245"}))))),t.createElement(RUI.Dialog,{ref:"dialogSet",title:"库存设置",draggable:!1,onSubmit:this.stockSet,buttons:"submit,cancel"},t.createElement("div",{style:{width:"500px",wordWrap:"break-word",maxHeight:"350px",overflow:"auto"}},t.createElement("div",{className:""},t.createElement("label",{htmlFor:"",className:"c"},"产品信息："),t.createElement("span",null,m.name,"   ",m.storeTotalNum,"双"),t.createElement("table",{className:"table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"鞋码"),t.createElement("td",null,"最小值"),t.createElement("td",null,"最大值"))),t.createElement("tbody",null,c.length>0&&c.map(function(a,l){return t.createElement("tr",{key:l},t.createElement("td",null,a.shoeCode),t.createElement("td",null,t.createElement(RUI.Input,{className:"w-80",onChange:e.stockChange.bind(e,"storeMin",l),value:a.storeMin})),t.createElement("td",null,t.createElement(RUI.Input,{className:"w-80",onChange:e.stockChange.bind(e,"storeMax",l),value:a.storeMax})))}))))))))}});e.exports=y}).call(t,a(2),a(72))}});